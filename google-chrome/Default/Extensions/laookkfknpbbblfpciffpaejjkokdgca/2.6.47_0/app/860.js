(self.webpackChunkmomentum=self.webpackChunkmomentum||[]).push([[860],{19195:(e,t,s)=>{"use strict";s.d(t,{FZ:()=>n,Ox:()=>d,TF:()=>o,cl:()=>r,mX:()=>h});var i=s(22005),a=s(23145);const n={mixins:[s(44614).Z],data:()=>({collection:new i.F}),unreactive:()=>({type:"",Model:null,dataService:null,names:{}}),computed:{emptyMessage(){return`No ${this.nameLCP} yet`},data(){return this.collection.loaded||this.refresh(),this.collection},visible(){return a.Fl[this.visibleSetting]}},created(){this.dataService||console.warn('No dataService property detected, please connect a dataService property in "unreactive"'),this.$e.$on(this.type+":refresh",this.refresh),this.$e.$on("resetCollections",this.resetCollection)},destroyed(){this.$e.$off(this.type+":refresh",this.refresh),this.$e.$off("resetCollections",this.resetCollection)},methods:{refresh({queryParams:e,mode:t}={}){return new Promise(((s,i)=>{this.dataService.get({queryParams:e,mode:t,success:e=>{this.addItemsToCollection(e),s()},failure:e=>{console.error(e),i(e)}})}))},addItemsToCollection(e,t=this.collection){const s=t.items,i=e.map((e=>e.id));return Object.keys(s).forEach((e=>{i.includes(e)||this.$delete(s,e)})),e.forEach((e=>{const t=e.id;let i;t in s?i=s[t]:(i=new this.Model,this.$set(s,t,i)),i.updateData(e)})),this.$set(t,"loaded",!0),e},add(e){const t=e.id=m.utils.uuidv4();this.$set(this.data.items,t,e);const s=this.getAddRequestBody(e);return this.dataService.add(t,s).then((t=>(this.capture&&this.capture(this.fullNameLCS+" add",{context:{item:e}}),t))).catch((e=>{throw this.$delete(this.data.items,t),e}))},update(e,t){const s=this.getUpdateRequestBody(e,t);return this.dataService.update(e.id,s).then((t=>(this.capture&&this.capture(this.fullNameLCS+" edit",{context:{item:e}}),t)))},delete(e){return this.dataService.delete(e.id).then((t=>(this.capture&&this.capture(this.fullNameLCS+" delete",{context:{item:e}}),this.$delete(this.data.items,e.id),t)))},archive(e){return this.$set(e,"archived",!0),this.dataService.update(e.id,{archived:!0}).then((t=>(this.capture&&this.capture(this.fullNameLCS+" archive",{context:{item:e}}),t))).catch((t=>{throw this.$set(e,"archived",!1),t}))},unarchive(e){return this.$set(e,"archived",!1),this.dataService.update(e.id,{archived:!1}).then((t=>(this.capture&&this.capture(this.fullNameLCS+" unarchive",{context:{item:e}}),t))).catch((t=>{throw this.$set(e,"archived",!0),t}))},getAddRequestBody(e){const t={};return e.props.forEach((s=>{void 0!==e.editProps[s]&&(t[s]=e.editProps[s])})),t},getUpdateRequestBody(e){const t={};return e.getChanges().forEach((s=>{const i=s.split(".");1===i.length?t[s]=e.editProps[s]:2===i.length&&(t[i[1]]=e.editProps[i[0]][i[1]])})),t},resetCollection(){this.collection=new i.F}}},r={data:()=>({listPinnedValues:{}}),computed:{pinnedItems(){return this.data.loaded?Object.values(this.data.items).filter((e=>e.pinned&&!e.archived)):[]}},methods:{considerPinnedInList(e){return this.listPinnedValues[e.id]??e.pinned},sortPinned(e,t,s){const i=this.considerPinnedInList(e),a=this.considerPinnedInList(t);return i&&!a?-1:!i&&a?1:(s="function"==typeof s?s(e,t):s)||(e.id>t.id?-1:e.id<t.id?1:0)},togglePinned(e){const t=this.listPinnedValues[e.id];e.id in this.listPinnedValues||(this.listPinnedValues[e.id]=e.pinned),e.pinned=!e.pinned,this.dataService.update(e.id,{pinned:e.pinned}).then((t=>(this.capture&&this.capture(this.fullNameLCS+(e.pinned?" pin":" unpin"),{context:{item:e}}),t))).catch((()=>{e.pinned=!e.pinned,this.listPinnedValues[e.id]=t}))},clearRecentlyChangedItems(){this.listPinnedValues={}}}},o={created(){this.assignRandomItem()},watch:{"randomItem.pinned"(e){e&&this.assignRandomItem()},"randomItem.archived"(e){e&&this.assignRandomItem()},randomItem(){this.randomItem||this.assignRandomItem()},"dashItems.length"(e){e||this.assignRandomItem()},"itemsArray.length"(e,t){!t&&e&&this.assignRandomItem()}},computed:{itemsArray(){return Object.values(this.data.items)},showRandom(){return a.ax["showRandomMetric-"+this.nameCS]},randomItem(){return Object.values(this.data.items).find((e=>e.random))},dashItems(){const e=!this.randomItem||!this.showRandom&&this.pinnedItems.length?[...this.pinnedItems]:[this.randomItem,...this.pinnedItems];return this.dashSort&&e.sort(this.dashSort),e}},methods:{getRandomItem(e){const t=Object.values(e).filter((e=>!e.pinned&&!e.archived));return t[m.utils.getRandomIntBetween(0,t.length-1)]},assignRandomItem(){const e=this.$watch("data.loaded",(t=>{if(t){this.clearRandomItem();const t=this.getRandomItem(this.data.items);t&&(t.random=!0),this.$nextTick((()=>e()))}}),{immediate:!0})},clearRandomItem(){this.randomItem&&(this.randomItem.random=!1)}}},d={computed:{selectedItem(){return Object.values(this.data.items).find((e=>e.selected))}},methods:{clearSelectedItem(){this.selectedItem&&(this.selectedItem.selected=!1)}}},h={data:()=>({mockCollection:new i.F}),computed:{data(){return this.mockCollection.loaded?this.mockCollection:(this.collection.loaded||this.refresh(),this.collection)}},methods:{addMockData(e){this.addItemsToCollection(e,this.mockCollection),this.mockCollection.loaded=!0},clearMockData(){this.mockCollection=new i.F}}}},71999:(e,t,s)=>{"use strict";s.d(t,{X:()=>a});const i=m.workers.serviceWorker.bus,a={mixins:[{methods:{_mergeQueryParams(...e){return Object.assign.apply(null,[{},this.queryParams.all||{}].concat(e))},_buildQueryString(...e){const t=new URLSearchParams(this._mergeQueryParams.apply(null,e)).toString();return t?"?"+t:""}}}],unreactive:()=>({type:"",path:"",mode:"sync",queryParams:{get:{},update:{}}}),created(){this.type||console.error("dataSyncServiceMixin Error: You must declare a type in unreactive")},methods:{get({path:e=this.path||this.type,success:t,failure:s,queryParams:a,mode:n=this.mode}={}){e+=this._buildQueryString(this.queryParams.get,a);const r=[this.type,{path:e,env:this._getEnv(),mode:n}],o=this.type+":refreshed";"server"===n?(i.addRecurringCrossTabMessageListener({msgId:o,success:t,failure:s}),i.sendMessage({handler:"get",args:r}).then(t).catch(s)):i.sendRecurringCrossTabMessage({msgId:o,handler:"get",args:r,success:t,failure:s})},add(e,t,{path:s=this.path||this.type,mode:a=this.mode}={}){return i.sendMessage({handler:"create",args:[this.type,e,t,{path:s,mode:a,env:this._getEnv()}]})},update(e,t,{path:s=this.path||this.type,mode:a=this.mode,queryParams:n}={}){return i.sendMessage({handler:"update",args:[this.type,e,t,{path:s,mode:a,env:this._getEnv(),queryString:this._buildQueryString(this.queryParams.update,n)}]})},delete(e,{path:t=this.path||this.type,mode:s=this.mode}={}){return i.sendMessage({handler:"delete",args:[this.type,e,{path:t,mode:s,env:this._getEnv()}]})},_getEnv:()=>({token:localStorage.getItem("token"),clientUuid:localStorage.getItem("client_uuid"),apiUrl:m.globals.urlRootApi,version:m.globals.version})}}},92664:(e,t,s)=>{"use strict";s.d(t,{H:()=>a,Z:()=>i});const i={data:()=>({id:"",archived:null,selected:!1,editProps:{}}),methods:{updateData(e){this.props.forEach((t=>this[t]=e[t])),e.id&&(this.id=e.id)},revertChanges(){this.editProps={}},getChanges(){const e=(e,t)=>e.getTime()===t.getTime();let t=[];return this.editProps&&this.props.forEach((s=>{if(Array.isArray(this[s])||Array.isArray(this.editProps[s]))m.utils.arraysAreEqual(this[s],this.editProps[s])||t.push(s);else if(this[s]instanceof Date&&this.editProps[s]instanceof Date)e(this[s],this.editProps[s])||t.push(s);else if("object"==typeof this.editProps[s]&&null!==this.editProps[s])for(let i in this.editProps[s]){let a,n=this[s][i],r=this.editProps[s][i];a=n instanceof Date&&r instanceof Date?!e(n,r):n!==r,a&&t.push(`${s}.${i}`)}else this[s]!==this.editProps[s]&&t.push(s)})),t},commitChanges(){this.beforeCommitChanges&&this.beforeCommitChanges(),this.props.forEach((e=>{void 0!==this.editProps[e]&&(this[e]=this.editProps[e])})),this.revertChanges()},copyProperties(){for(let e of this.props)Array.isArray(this[e])?this.$set(this.editProps,e,[...this[e]]):"object"==typeof this[e]&&null!==this[e]?this.$set(this.editProps,e,{...this[e]}):this.$set(this.editProps,e,this[e])}}},a={maxCharPerLine:14,computed:{brokenName(){return m.utils.lineBreakString(m.utils.removeTags(this.name),this.$options.maxCharPerLine)}}}},44614:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var i=s(72783);const a={unreactive:()=>({names:{}}),computed:{nameLCP(){return this.names.lowerCasePlural||this.type.replace(/([A-Z])/g," $1").trim().toLowerCase()},nameLCS(){return this.names.lowerCaseSingular||(0,i.singularize)(this.nameLCP)},nameCP(){return this.names.capitalizedPlural||m.utils.capitalizeWords(this.nameLCP)},nameCS(){return this.names.capitalizedSingular||m.utils.capitalizeWords(this.nameLCS)},fullNameLCP(){return this.names.fullLowerCasePlural||this.nameLCP},fullNameLCS(){return this.names.fullLowerCaseSingular||(0,i.singularize)(this.fullNameLCP)},fullNameCP(){return this.names.fullCapitalizedPlural||m.utils.capitalizeWords(this.fullNameLCP)},fullNameCS(){return this.names.fullCapitalizedSingular||m.utils.capitalizeWords(this.fullNameLCS)}}}},23145:(e,t,s)=>{"use strict";s.d(t,{Fl:()=>n,Jr:()=>d,ax:()=>o});var i=s(48713);const a=new i.Z.observable({}),n=new Proxy(a,{get:(e,t)=>(e.hasOwnProperty(t)||i.Z.set(e,t,m.models.customization.getComputedSetting(t)),e[t]),set:()=>(console.warn('Computed settings cannot be set by reactiveCustomization. Instead set persistent settings with "persistent"'),!1)}),r=new i.Z.observable({}),o=new Proxy(r,{get:(e,t)=>(e.hasOwnProperty(t)||i.Z.set(e,t,m.models.customization.get(t)),e[t]),set:(e,t,s)=>(m.models.customization.save(t,s),i.Z.set(e,t,s),!0)});function d(e={}){Object.entries(e).forEach((([e,t])=>i.Z.set(r,e,t))),m.models.customization.save(e)}m.models.customization.on("change",(e=>{e&&("balanceModeStr"in e.changed&&Object.entries(m.models.customization.attributes).forEach((([e,t])=>i.Z.set(a,e,t))),Object.entries(e.changed).forEach((([e,t])=>{a[e]=m.models.customization.getComputedSetting(e),i.Z.set(r,e,t)})))})),m.on("customization:update",(e=>{e.forEach((e=>{const t=m.models.customization.getComputedSetting(e);i.Z.set(a,e,t),i.Z.set(r,e,t)}))}))},22005:(e,t,s)=>{"use strict";s.d(t,{F:()=>a});var i=s(48713);function a(){return new i.Z.observable({loaded:!1,items:{}})}},19346:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0OTIuNDMyIDQ5Mi40MzIiPjxwYXRoIGQ9Ik0xNDIuMjM4IDQ5Mi40MzJjLTkuNzkgMC0xOS41ODgtMy43MzYtMjcuMDUtMTEuMjA5LTE0Ljk0NS0xNC45MzQtMTQuOTQ1LTM5LjE2MiAwLTU0LjA5OGwxODAuOS0xODAuOTA5LTE4MC45LTE4MC45MWMtMTQuOTQ1LTE0LjkzNS0xNC45NDUtMzkuMTYzIDAtNTQuMDk4IDE0LjkyNi0xNC45NDQgMzkuMTcyLTE0Ljk0NCA1NC4wOTggMGwyMDcuOTYgMjA3Ljk1OGMxNC45NDMgMTQuOTM1IDE0Ljk0MyAzOS4xNjQgMCA1NC4xbC0yMDcuOTYgMjA3Ljk1N2MtNy40NjIgNy40NzQtMTcuMjYgMTEuMjA5LTI3LjA0OCAxMS4yMDl6Ij48L3BhdGg+PC9zdmc+Cg=="},79557:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNiAxMCIgZmlsbD0id2hpdGUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAuODg4NTA3IDEwQzAuNjg5Njk4IDEwIDAuNDkwNzI2IDkuOTI0MTMgMC4zMzkxOTMgOS43NzIzN0MwLjAzNTY5ODkgOS40NjkxIDAuMDM1Njk4OSA4Ljk3NzEgMC4zMzkxOTMgOC42NzM3OUw0LjAxMjggNUwwLjMzOTE5MyAxLjMyNjE5QzAuMDM1Njk4OSAxLjAyMjkgMC4wMzU2OTg5IDAuNTMwODk2IDAuMzM5MTkzIDAuMjI3NjA1QzAuNjQyMyAtMC4wNzU4NjgzIDEuMTM0NjcgLTAuMDc1ODY4MyAxLjQzNzc4IDAuMjI3NjA1TDUuNjYwOSA0LjQ1MDY5QzUuOTY0MzUgNC43NTM5OCA1Ljk2NDM1IDUuMjQ2IDUuNjYwOSA1LjU0OTMxTDEuNDM3NzggOS43NzIzN0MxLjI4NjI1IDkuOTI0MTUgMS4wODcyOCAxMCAwLjg4ODUwNyAxMFYxMFoiIC8+PC9zdmc+Cg=="},69318:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNDI3LjI1MiA5My45MzljLTQyLjUwMy0yNi4yNjgtOTcuMDQ2LTM1LjI5MS0xNDMuNTQxLTI1LjY0MWwuMDEtLjAyMUMyOTMuMjM2IDQ5LjI1IDMwOS45IDQwIDMzNC42NjcgNDBjMTEuMDQ2IDAgMjAtOC45NTQgMjAtMjBzLTguOTU0LTIwLTIwLTIwQzMwMy4wODQgMCAyNzQuNjk2IDExLjEwOSAyNTYgCTM3LjAyOSAyMzcuMzA1IDExLjExMSAyMDguOTE4IDAgMTc3LjMzMyAwYy0xMS4wNDYgMC0yMCA4Ljk1NC0yMCAyMHM4Ljk1NCAyMCAyMCAyMGMyNC4zMzMgMCA0MC44MjggOC45MTkgNTAuNDI4IDI3LjI2Ny4xOC4zNDMuMzUxLjY4Ny41MjMgMS4wMzFDMTI2LjY1MiA0Ny4yMDYgMCAxMTAuNTE4IDAgMjU1Ljk1OCAwIDM5NC44NjIgOTYuNTk5IDUxMiAyNTYgNTEyYzE1OS4wMDkgMCAyNTYtMTE2LjczMSAyNTYtMjU2LjA0MiAwLTcwLjcwMy0zMC4wOTgtMTI4LjI0My04NC43NDgtMTYyLjAxOXptLTE4MC4xOTYgMjIuNjE2YTIwLjA3IDIwLjA3IDAgMCAwIDE3Ljg4OSAwYzY4LjUzMS0zNC4yNjkgMjE4LjY1NS0uMzk1IDIwNi4yOTYgMTU4Ljc3OGgtOTYuNTc0VjI1NmMwLTExLjA0Ni04Ljk1NC0yMC0yMC0yMHMtMjAgOC45NTQtMjAgMjB2MTkuMzMzSDI3NnYtNTguNjY3YzAtMTEuMDQ2LTguOTU0LTIwLTIwLTIwcy0yMCA4Ljk1NC0yMCAyMHY1OC42NjdoLTU4LjY2N1YyNTZjMC0xMS4wNDYtOC45NTQtMjAtMjAtMjBzLTIwIDguOTU0LTIwIDIwdjE5LjMzM0g0MC43NkMyOC41MjEgMTE3LjcxMiAxNzcuMjE5IDgxLjYzOCAyNDcuMDU2IDExNi41NTV6TTI1NiA0NzJjLTExMS45MDggMC0xODUuNjg0LTY1LjMxNS0yMDguNzI3LTE1Ni42NjdoNDE3LjQ1M0M0NDEuNzI4IDQwNi41MDggMzY4LjExNSA0NzIgMjU2IDQ3MnptMzMuODA5LTkyLjQ3NmM3LjgxMSA3LjgxMSA3LjgxMSAyMC40NzQgMCAyOC4yODQtNy44MTEgNy44MTEtMjAuNDc0IDcuODEtMjguMjg0IDBMMjU2IDQwMi4yODRsLTUuNTI0IDUuNTI0Yy03LjgxMSA3LjgxMS0yMC40NzQgNy44MTEtMjguMjg0IDBzLTcuODExLTIwLjQ3NCAwLTI4LjI4NGwxOS42NjctMTkuNjY3YzcuODExLTcuODExIDIwLjQ3NC03LjgxMSAyOC4yODQgMHoiIC8+PC9zdmc+Cg=="}}]);